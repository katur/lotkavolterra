{% extends 'base.html' %}
{% block body_id %}home{% endblock %}

{% block head_extras%}
<meta name="viewport" content="width=device-width">
{% endblock %}


{% block content %}

<div class="page-section">
	<h2 class="page-title">Lotka-Volterra</h2>

  <p>
    Everyone knows that predator and prey populations change
    in response to each other.
    Scientists have developed models to show what happens to these
    populations over time, including one called Lotka-Volterra.
  </p>

  <p>
    The Lotka-Volterra model is just two simple equations,
    based on equally simple assumptions  that do not factor
    in overpopulation or other natural complexities.
    The prey population, given ample food, grows exponentially on its own,
    but is negatively affected by encountering predators.
    The predator population, relying on prey for food,
    declines exponentially on its own,
    but is positively affected by encountering prey.
    This creates a cycle that can continue indefinitely.
  </p>

  <p>
    Lotka-Volterra has been useful in describing some real natural
    populations, such as moose and wolves in Isle Royale National
    Park in Lake Superior.
    It also has surprising applications in other areas,
    such as economics, speciation, resource competition,
    and epidemiology.
  </p>
</div>

<div class="page-section">
	<h2 class="page-title">The Simulation</h2>

  <p>
    We developed a thought exercise to show how models can be used in
    the real world: a computer simulation that applies a predator-prey
    model to the guests at this luncheon. You will see it running on a
    screen at times during the event.
  </p>

  <p>
    Each guest has been randomly assigned to be one of three populations,
    all of which exist in
    <a href="http://blackrockforest.org/">Black Rock Forest</a>:
    Eastern coyotes, wild turkeys, or Eurasian boars.
    Eurasian boars are an invasive species, which, as in nature,
    throws a monkey wrench into the works by competing with
    native species for resources.
  </p>

  <div class="animal-photos">
    <img class="predator"
        src="{{ url_for('static', filename='images/EasternCoyote.jpg') }}">
    <img class="prey"
        src="{{ url_for('static', filename='images/WildTurkey.jpg') }}">
    <img class="invasive"
        src="{{ url_for('static', filename='images/EurasianBoar.jpg') }}">
  </div>

  <p>
    Over time, even as you eat your lunch, the population you represent
    will be interacting with the two populations sitting next to you,
    according to rules inspired by the Lotka-Volterra model but with
    some added complexities.
    You can see your bubble on the screen grow or shrink
    as your population responds to these interactions.
    A population will go extinct if it gets too small or gets too
    big and explodes.
    Fortunately, you yourself will not explode.
  </p>

  <div class="example-simulation">
		<!--
		<iframe
				src="https://player.vimeo.com/video/162919815?autoplay=1&loop=1&badge=0&byline=0&portrait=0&title=0"
				width="640" height="556" frameborder="0"
				webkitallowfullscreen mozallowfullscreen allowfullscreen>
		</iframe>
		-->

    <svg class="simulation"></svg>

		<script type="text/javascript" charset="utf-8">
			lotkavolterra.launchSimulation({
				jsonURL:
					"{{ url_for('static', filename='json/homepage.json') }}",
					populationSize: 1000,
   				numGenerations: 40,
					repeat: true
			});
		</script>
  </div>

  <p>
    If youâ€™re lucky, your table will survive for many generations,
    the populations keeping one another in check.
    But some tables will be wiped out quickly from an imbalanced dynamic.
    Extinction may be forever in the real world, but here,
    the simulation periodically starts over,
    and the outcome may be different each time.
  </p>
</div>

<div class="page-section">
	<h2 class="page-title">View Examples</h2>

  <form method="GET" action="{{ url_for('run_simulation') }}">
    <table>
      <tr>
        <td>
          <label for="simulation-select">Simulation:</label>
        </td>

        <td>
          <select id="simulation-select" name="simulation">
            {% for simulation in test_simulations %}
            <option value="{{ simulation }}" data-type="test-based">
              {{ simulation }}
            </option>
            {% endfor %}

            {% for name, file in input_simulations %}
            <option value="{{ file }}" data-type="input-based">
              {{ name }}
            </option>
            {% endfor %}
          </select>
        </td>

				<td id="seats-input-wrapper">
					&nbsp;with
          <input id="seats-input"
                 name="num_seats"
                 value="{{ defaults.num_seats }}"
                 size="4">
          </input>

          <label for="seats-input">seats</label>
				</td>
      </tr>

      <tr>
        <td>
          <label for="generations-input">Generations:</label>
        </td>

        <td>
          <input id="generations-input"
                 name="num_generations"
                 value="{{ defaults.num_generations }}"
                 size="4">
          </input>
        </td>
      </tr>

      <tr>
        <td>
          <label for="repeat-checkbox">Repeat?</label>
        </td>

        <td>
          <input id="repeat-checkbox" type="checkbox" name="repeat">
          </input>
        </td>
      </tr>
    </table>

    <button class="submit" type="submit">Submit</button>
  </form>

  <script>
    lotkavolterra.formInit();
  </script>
</div>

<div class="page-section attribution">
  Eastern Coyote photograph by ForestWander Nature Photography
  (found on Wikimedia Commons).

  Wild Turkey photograph by
  <a href="http://www.lauraerickson.com">
    Laura Erickson</a>.

  Eurasian Boar photograph by Valentin Panzirsch
  (found on Wikimedia Commons).
</div>
{% endblock %}
